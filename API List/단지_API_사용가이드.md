# 부동산 API 실전 사용 가이드

## 실제 API 호출 예제

### 1단계: API 이해하기
API는 "물건"을 다루는 것처럼 생각할 수 있습니다.
- **단지(Complex)**: 하나의 아파트 단지
- **평수(Pyeong)**: 그 단지의 각 평수별 정보
- **매물(Article)**: 실제로 팔고 있는 물건

### 2단계: 자주 사용되는 API 5가지

#### API 1. 단지 기본 정보 조회
**목적**: 특정 단지의 기본 정보를 알아보려면
**사용법**:
```
GET /complex/{complexNumber}
```

**예시**:
- 요청: `/complex/2000000001` (단지 번호 2000000001의 정보 줘)
- 응답: 단지명, 위치, 건설사, 준공년도 등

**누가 사용?**: 부동산 중개인, 매물 앱 개발자

---

#### API 2. 단지의 평수별 시세 조회
**목적**: "이 단지의 84평 시세가 얼마?" 라는 질문에 답하려면
**사용법**:
```
GET /complex/{complexNumber}/pyeong/{pyeongTypeNumber}/market-price
```

**예시**:
- 요청: `/complex/2000000001/pyeong/101/market-price`
- 의미: 2000000001 단지의 101평 시세를 줘
- 응답: 최근 시세, 상승/하락추이

**누가 사용?**: 시세 확인을 원하는 사람들

---

#### API 3. 투어 정보 조회
**목적**: "이 단지에서 가능한 투어"를 알아보려면
**사용법**:
```
GET /complex/{complexNumber}/tour
```

**예시**:
- 요청: `/complex/2000000001/tour`
- 응답: 투어 일정, 투어 위치, 담당자 정보

**누가 사용?**: 부동산 앱에서 투어 스케줄링 기능

---

#### API 4. 단지 VR 투어 조회
**목적**: "이 단지의 VR 투어를 보고 싶어"
**사용법**:
```
GET /complex/{complexNumber}/vr/representative/{pyeongTypeNumber}
```

**예시**:
- 요청: `/complex/2000000001/vr/representative/101`
- 의미: 2000000001 단지의 101평 VR 투어 줘
- 응답: VR 투어 URL, 평수 정보

**누가 사용?**: VR 콘텐츠 제공 서비스

---

#### API 5. 실거래가 조회
**목적**: "이 단지에서 실제로 얼마에 팔렸어?"를 알려면
**사용법**:
```
GET /complex/{complexNumber}/pyeong/{pyeongTypeNumber}/real-price/list
```

**예시**:
- 요청: `/complex/2000000001/pyeong/101/real-price/list`
- 응답: 
  - 거래 날짜
  - 거래 금액
  - 거래자 정보 (개인정보 제외)

**누가 사용?**: 부동산 분석가, 가격 비교 앱

---

## 응답 데이터 이해하기

### 응답 형식: JSON
모든 API는 다음과 같은 JSON 형식으로 응답합니다:

```json
{
  "code": "success",
  "message": "조회되었습니다",
  "data": {
    "complexNumber": 2000000001,
    "complexName": "아름다운 단지",
    "district": "서울시 강남구",
    "location": {
      "latitude": 37.4979,
      "longitude": 127.0276
    }
  },
  "timeStamp": "2024-01-01T10:30:00.000Z"
}
```

### 각 필드 설명
| 필드 | 설명 |
|------|------|
| **code** | 요청 성공 여부 (success/fail) |
| **message** | 사람이 읽을 수 있는 메시지 |
| **data** | 실제 응답 데이터 |
| **timeStamp** | 응답 생성 시간 |

---

## 에러 대응하기

### 에러 상황 1: 잘못된 단지 번호
**에러 메시지**: 
```json
{
  "code": "bad_request",
  "message": "잘못된 요청입니다"
}
```
**해결 방법**: 단지 번호가 맞는지 다시 확인하세요

### 에러 상황 2: 인증 정보 없음
**에러 메시지**: 
```json
{
  "code": "unauthorized",
  "message": "인증이 필요합니다"
}
```
**해결 방법**: NNB 또는 NID_AUTH 쿠키를 포함해야 합니다

### 에러 상황 3: 서버 오류
**에러 메시지**:
```json
{
  "code": "internal_server_error",
  "message": "서버 오류가 발생했습니다"
}
```
**해결 방법**: 나중에 다시 시도하세요

---

## 개발자를 위한 팁

### Tip 1: 데이터 캐싱
같은 데이터를 여러 번 조회하는 것은 비효율적입니다.
- 데이터를 저장해두고 재사용하세요
- 주기적으로 업데이트하세요

### Tip 2: 요청 수 제한
과도한 요청은 API 서버에 부담을 줍니다.
- 필요한 데이터만 요청하세요
- 불필요한 중복 요청을 피하세요

### Tip 3: 에러 처리
프로덕션 환경에서는 항상 에러를 처리해야 합니다.
```
요청 시도
-> 성공? 데이터 반환
-> 실패? 에러 메시지 로깅 + 재시도 또는 대체 방법
```

---

## 자주 묻는 질문 (FAQ)

### Q1: 이 API를 사용하려면 비용이 드나요?
**A**: 개발 서버(dev.io.naver.com)는 테스트 목적입니다. 프로덕션 환경은 별도의 계약이 필요할 수 있습니다.

### Q2: 얼마나 자주 데이터가 업데이트되나요?
**A**: 시세 데이터는 일일 업데이트, 실거래가는 실시간 처리됩니다.

### Q3: 개인 정보는 어떻게 보호되나요?
**A**: 실거래가 정보에서 거래자 이름 등 개인정보는 마스킹됩니다.

### Q4: 얼마나 많은 요청을 할 수 있나요?
**A**: Rate limiting이 있습니다. 상세 정보는 문서 관리자에게 문의하세요.

### Q5: API가 변경되면 어떻게 알 수 있나요?
**A**: OpenAPI v3.1.0 표준을 따르므로, 정기적으로 버전을 확인하세요.

---

## 마지막 팁

1. **먼저 테스트**: 개발 환경에서 충분히 테스트한 후 실서비스 적용
2. **로깅 기록**: 문제 발생 시 추적할 수 있도록 요청과 응답 기록
3. **문서 읽기**: 각 API의 설명과 파라미터를 꼼꼼히 확인
4. **관리자 연락**: 이해가 안 되면 API 관리팀에 문의

---

**작성일**: 2024년  
**대상**: API 사용자 (초급~중급)
**버전**: v1.0

이 가이드가 도움이 되길 바랍니다!
